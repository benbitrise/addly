# Yaml generated by Bitrise swift plugin 0.0.2. DO NOT EDIT

format_version: "13"
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
project_type: ios
app:
  title: Addly
  summary: Simple iOS app to demo Bitrise capabilities
  description: Simple iOS app to demo Bitrise capabilities
  envs:
  - BITRISE_SCHEME: Addly
    opts:
      is_expand: true
      skip_if_empty: false
      title: ""
      description: ""
      summary: ""
      category: ""
      is_required: false
      is_dont_change_value: false
      is_template: false
      is_sensitive: false
      unset: false
  - BITRISE_PROJECT_PATH: Addly.xcodeproj
    opts:
      is_expand: true
      skip_if_empty: false
      title: ""
      description: ""
      summary: ""
      category: ""
      is_required: false
      is_dont_change_value: false
      is_template: false
      is_sensitive: false
      unset: false
meta:
  bitrise.io:
    machine_type_id: g2-m1.8core
    stack: osx-xcode-15.2.x
trigger_map:
- pipeline: bens_pipeline
  push_branch: '*'
pipelines:
  bens_pipeline:
    stages:
    - build_for_testing: {}
    - test_without_building: {}
    - build_markets: {}
stages:
  build_for_testing:
    workflows:
    - build_for_testing: {}
  build_markets:
    workflows:
    - build_usa: {}
    - build_canada: {}
    - build_mexico: {}
  test_without_building:
    workflows:
    - run_tests_with_planUITest: {}
    - run_tests_with_planUnitTest: {}
workflows:
  build_canada:
    steps:
    - activate-ssh-key@4: {}
    - git-clone@8: {}
    - script@1:
        inputs:
        - content: echo "Creating IPA for canada"
          opts: {}
    - xcode-archive@0:
        inputs:
        - opts: {}
          scheme: aedemo
        - automatic_code_signing: api-key
          opts: {}
    - deploy-to-bitrise-io@2: {}
  build_for_testing:
    steps:
    - activate-ssh-key@4: {}
    - git-clone@8: {}
    - xcode-build-for-test@2:
        inputs:
        - destination: generic/platform=iOS Simulator
          opts: {}
    - share-pipeline-variable@1:
        run_if: .IsCI
        inputs:
        - opts: {}
          variables: TEST_BUNDLE_ZIP_PATH=$BITRISE_TEST_BUNDLE_ZIP_PATH
    - deploy-to-bitrise-io@2:
        inputs:
        - opts: {}
          pipeline_intermediate_files: $BITRISE_TEST_BUNDLE_PATH:BITRISE_TEST_BUNDLE_PATH
  build_mexico:
    steps:
    - activate-ssh-key@4: {}
    - git-clone@8: {}
    - script@1:
        inputs:
        - content: echo "Creating IPA for mexico"
          opts: {}
    - xcode-archive@0:
        inputs:
        - opts: {}
          scheme: aedemo
        - automatic_code_signing: api-key
          opts: {}
    - deploy-to-bitrise-io@2: {}
  build_usa:
    steps:
    - activate-ssh-key@4: {}
    - git-clone@8: {}
    - script@1:
        inputs:
        - content: echo "Creating IPA for usa"
          opts: {}
    - xcode-archive@0:
        inputs:
        - opts: {}
          scheme: aedemo
        - automatic_code_signing: api-key
          opts: {}
    - deploy-to-bitrise-io@2: {}
  run_tests_with_planUITest:
    steps:
    - pull-intermediate-files@1:
        inputs:
        - artifact_sources: .*
          opts: {}
    - xcode-test-without-building@0:
        inputs:
        - opts: {}
          xctestrun: $BITRISE_TEST_BUNDLE_PATH/Addly_UITest_iphonesimulator17.2-arm64-x86_64.xctestrun
        - destination: platform=iOS Simulator,name=iPhone 12 Pro Max
          opts: {}
    - deploy-to-bitrise-io@2:
        inputs:
        - opts: {}
          pipeline_intermediate_files: $BITRISE_XCRESULT_PATH:BITRISE_UITEST_XCRESULT_PATH
  run_tests_with_planUnitTest:
    steps:
    - pull-intermediate-files@1:
        inputs:
        - artifact_sources: .*
          opts: {}
    - xcode-test-without-building@0:
        inputs:
        - opts: {}
          xctestrun: $BITRISE_TEST_BUNDLE_PATH/Addly_UnitTest_iphonesimulator17.2-arm64-x86_64.xctestrun
        - destination: platform=iOS Simulator,name=iPhone 12 Pro Max
          opts: {}
    - deploy-to-bitrise-io@2:
        inputs:
        - opts: {}
          pipeline_intermediate_files: $BITRISE_XCRESULT_PATH:BITRISE_UNITTEST_XCRESULT_PATH
